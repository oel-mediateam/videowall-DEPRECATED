$.fn.preloader=function(b){var c={delay:100,preload_parent:"span",check_timer:250,ondone:function(){},oneachload:function(a){},fadein:500};var b=$.extend(c,b),root=$(this),images=root.find("img").css({"visibility":"hidden",opacity:0}),timer,counter=0,i=0,checkFlag=[],delaySum=b.delay,init=function(){timer=setInterval(function(){if(counter>=checkFlag.length){clearInterval(timer);b.ondone();return}for(i=0;i<images.length;i++){if(images[i].complete==true){if(checkFlag[i]==false){checkFlag[i]=true;b.oneachload(images[i]);counter++;delaySum=delaySum+b.delay}if($('.vh:eq('+i+')').hasClass('0')){$(images[i]).css("visibility","visible").delay(delaySum).animate({opacity:1},b.fadein,function(){$(this).parent().removeClass("preloader")})}else{$(images[i]).css("visibility","visible").delay(delaySum).animate({opacity:.85},b.fadein,function(){$(this).parent().removeClass("preloader")})}}}},b.check_timer)};images.each(function(){if($(this).parent(b.preload_parent).length==0)$(this).wrap("<span class='preloader' />");else $(this).parent().addClass("preloader");checkFlag[i++]=false});images=$.makeArray(images);var d=jQuery("<img />",{id:'loadingicon',src:'https://media.uwex.edu/media/video_wall/source/img/spinner.gif'}).hide().appendTo("body");timer=setInterval(function(){if(d[0].complete==true){clearInterval(timer);init();d.remove();return}},100)}