$(document).ready(function(){function e(e){var t=$(e).find("setup"),n=$(e).find("group"),o=$(e).find("video");y=o.length,f=t.find("imgFormat").text().length<=0?"jpg":t.find("imgFormat").text(),g=n.attr("total"),w=new Array(y),k=new Array(y),q=new Array(y),T=new Array(y),E=new Array(y),g>0&&(n.find("name").each(function(){$("#group ul").append('<li><a href="JavaScript:void(0);" class="minimal">'+$(this).text()+"</li>")}),$("#group").is(":visible")||$("#group").removeClass("hidden")),o.each(function(e){var t=$(this).attr("fileName"),i=$(this).attr("group"),n=$(this).find("author").text(),o=$(this).find("title").text(),r=$(this).find("description").text(),s=$(this).find("src").text();k[e]=s.length>0?s:0,w[e]=t,q[e]=n,T[e]=o,E[e]=r,$("#videoWall").append('<div class="vh '+i+'"><span class="hoverTitle">'+o+'</span><span class="thumb"><img src="assets/thumbs/'+t+"."+f+'" width="160" height="100" border="0" /></span></div>')}),$("#videoWall").preloader(),i()}function t(e,t){var i,n;i=0===e?"<strong>Error 0</strong> - Not connect. Please verify network.":404===e?"<strong>Error 404</strong> - Requested page not found.":406===e?"<strong>Error 406</strong> - Not acceptable error.":500===e?"<strong>Error 500</strong> - Internal Server Error.":"Unknow error",n="parsererror"===t?"Requested XML parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"error"===t?"HTTP / URL Error.":"Uncaught Error.\n"+e.responseText,$("#errorMsg").html("<p>"+i+"<br />"+n+"</p>")}function i(){p?n():r(),g>0&&a(),$(".vh").each(function(e){$(".vh:eq("+e+")").hasClass("0")&&($(".vh:eq("+e+")").css({cursor:"default","box-shadow":"none"}),$(".vh:eq("+e+")").unbind("mouseenter"),$(".vh:eq("+e+")").unbind("mouseleave"),$(".vh:eq("+e+")").unbind("click"))})}function n(){o()}function o(){$(".vh").click(function(){var e=$(".vh").index(this);$(".thumb img:eq("+e+")").hasClass("current")||$(".vh:eq("+e+")").hasClass("0")?(x=$(".vh").index($(this)),""===T[x]&&v(T[x])||v(q[x])||$.fancybox.open("#videoContainer",{padding:0,openEffect:"fade",closeEffect:"fade",closeClick:!1,helpers:{overlay:{opacity:.9,css:{cursor:"default","background-color":"#000"},closeClick:!1}},autoSize:!1,beforeShow:function(){x!==C&&($("#title").html(T[x]+"<br /><small>"+q[x]+"</small>"),$("#desc").html(E[x]),$(".vjs-poster").attr("src","assets/thumbs/"+w[x]+"."+f).css("display","block"),k[x].length>0?($("#videoclip").addClass("hidden"),$("#exVid").removeClass("hidden").html(k[x])):($("#videoclip").removeClass("hidden"),m.src({type:"video/mp4",src:"assets/videos/"+w[x]+".mp4"})))},afterClose:function(){$("#exVid").html("").addClass("hidden")}})):(d(),l(e))})}function r(){s(),$(".vh").bind("click",function(){x=$(".vh").index($(this)),""===T[x]&&v(T[x])||v(q[x])||$.fancybox.open("#videoContainer",{padding:0,openEffect:"fade",closeEffect:"fade",closeClick:!1,helpers:{overlay:{opacity:.9,css:{cursor:"default","background-color":"#000"},closeClick:!1}},scrolling:"auto",autoSize:!1,beforeShow:function(){x!==C&&($("#title").html(T[x]+"<br /><small>"+q[x]+"</small>"),$("#desc").html(E[x]),k[x].length>0?($("#videoclip").addClass("hidden"),$("#exVid").removeClass("hidden").html(k[x])):($("#videoclip").removeClass("hidden"),m.src({type:"video/mp4",src:"assets/videos/"+w[x]+".mp4"})))},afterShow:function(){k[x].length>0&&c()},afterClose:function(){$("#exVid").html("").addClass("hidden")}})})}function s(){$(".vh").bind("mouseover",function(){var e=$(".vh").index(this);$(".thumb img:eq("+e+")").hasClass("current")||$(".vh:eq("+e+")").hasClass("0")||l(e)}),$(".vh").bind("mouseleave",function(){d()})}function a(){var e=$("#group ul li");e.bind("click",function(){var t=$(e).index(this);t+1!==b?(d(),$("#group ul li a").css({"background-color":"#e3e3e3",color:"#555"}),$("#group ul li a:eq("+t+")").css({"background-color":"#d0d0d0",color:"#000"}),$(".vh."+(t+1)+" .thumb img").each(function(e){h($(this),$(".vh."+(t+1)+" .hoverTitle:eq("+e+")"))}),p||($(".vh").unbind("mouseover"),$(".vh").unbind("mouseleave")),b=t+1):(d(),p?o():s(),$("#group ul li a").css({"background-color":"#e3e3e3",color:"#555"}),b=0)})}function c(){m.play(),C=x}function l(e){$(".thumb img:eq("+e+")").animate({opacity:1},250,function(){$(this).addClass("current")}),(T[e].length>0||!v(T[e]))&&$(".hoverTitle:eq("+e+")").animate({marginTop:"68px"},500,function(){$(this).addClass("current")})}function d(){$(".thumb img").each(function(e){$(".vh:eq("+e+")").hasClass("0")?$(this).css("opacity",1).unbind("mouseleave"):$(this).animate({opacity:.85},250,function(){$(this).hasClass("current")&&$(this).removeClass("current")})}),$(".hoverTitle").each(function(){$(this).animate({marginTop:"100px"},250,function(){$(this).hasClass("current")&&$(this).removeClass("current")})})}function h(e,t){e.animate({opacity:1},250,function(){$(this).addClass("current")}),(t.text().length>0||!t.text().match(/^[\s ]*$/gi))&&t.animate({marginTop:"68px"},500,function(){$(this).addClass("current")})}function u(){var e=navigator.userAgent,t={iphone:e.match(/(iPhone|iPod|iPad)/),blackberry:e.match(/BlackBerry/),android:e.match(/Android/),browser:e.match(/(Mozilla|Webkit|msie|Opera)/)};return t.android?($("#device").html("<p>You are viewing this website on an Android device.</p>"),!0):t.iphone?($("#device").html("<p>You are viewing this website on an iOS device.</p>"),!0):t.blackberry?($("#device").html("<p>You are viewing this website on a Blackberry device.</p>"),!0):t.browser?($("#device").html("<p>You are viewing this website on a desktop/laptop web browser.</p>"),!1):($("#device").html("<p>You are viewing this website on an unknown device.</p>"),!0)}function v(e){var t=/^[\s ]*$/gi;return t.test(e)}var p=u(),m=_V_("videoclip"),f,g,b,x,C,y,w,k,q,T,E;$.ajaxSetup({url:"assets/videoWall.xml",dataType:"xml",accepts:"xml",content:"xml",contentType:'xml; charset="utf-8"',cache:!1}),$.ajax({type:"get",beforeSend:function(e){e.overrideMimeType("xml; charset=utf-8"),e.setRequestHeader("Accept","text/xml")},success:function(t){e(t)},error:function(e,i){t(e.status,i)}})});